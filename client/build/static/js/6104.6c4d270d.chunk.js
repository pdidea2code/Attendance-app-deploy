"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6104],{51398:(e,s,r)=>{r.r(s),r.d(s,{default:()=>j});var i=r(88329),a=r(78983),d=r(75985),l=(r(5462),r(61134)),n=r(72791),c=r(57689),t=r(28725),m=r(80184);const o=()=>{var e,s,r;(0,c.s0)();const[i,o]=(0,n.useState)(!1),{register:x,setError:h,setValue:j,getFieldState:u,handleSubmit:g,formState:{errors:v},watch:w}=(0,l.cI)(),p=w("newPassword");return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:"bg-light min-vh-100",children:(0,m.jsx)(a.KB,{className:"mt-3",children:(0,m.jsx)(a.rb,{children:(0,m.jsx)(a.b7,{md:12,children:(0,m.jsxs)(a.xH,{children:[(0,m.jsx)(a.bn,{children:"Change Password "}),(0,m.jsx)(a.sl,{children:(0,m.jsxs)(a.lx,{className:"row g-3",onSubmit:g((async e=>{o(!0);try{200===(await(0,t.Cp)(e)).status&&d.Am.success("Password change successfully"),o(!1),j("password",""),j("newPassword",""),j("confirmPassword","")}catch(i){var s,r;console.log(i),o(!1),d.Am.error((null===(s=i.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"An error occurred")}})),children:[(0,m.jsxs)(a.b7,{xl:12,md:12,children:[(0,m.jsx)(a.L8,{children:"Password"}),(0,m.jsx)(a.jO,{type:"password",...x("password",{required:"Password is required"}),invalid:!!v.password}),(0,m.jsx)(a.CO,{invalid:!0,children:null===(e=v.password)||void 0===e?void 0:e.message})]}),(0,m.jsxs)(a.b7,{xl:12,md:12,children:[(0,m.jsx)(a.L8,{children:"New Password"}),(0,m.jsx)(a.jO,{type:"password",...x("newPassword",{required:"New password is required"}),invalid:!!v.newPassword}),(0,m.jsx)(a.CO,{invalid:!0,children:null===(s=v.newPassword)||void 0===s?void 0:s.message})]}),(0,m.jsxs)(a.b7,{xl:12,md:12,children:[(0,m.jsx)(a.L8,{children:"Confirm Password"}),(0,m.jsx)(a.jO,{type:"password",...x("confirmPassword",{required:"Confirm password is required",validate:e=>e===p||"Passwords do not match"}),invalid:!!v.confirmPassword}),(0,m.jsx)(a.CO,{invalid:!0,children:null===(r=v.confirmPassword)||void 0===r?void 0:r.message})]}),(0,m.jsx)(a.b7,{xl:12,md:12,children:(0,m.jsx)(a.u5,{type:"submit",color:"primary",children:i?(0,m.jsx)(a.LQ,{size:"sm"}):"Submit"})})]})})]})})})})})})},x=JSON.parse(i.Z.get("admin")),h=()=>{var e,s;const r=(0,c.s0)(),[o,h]=(0,n.useState)(!1),[j,u]=(0,n.useState)(""),{register:g,setError:v,setValue:w,handleSubmit:p,formState:{errors:b}}=(0,l.cI)();return(0,n.useEffect)((()=>{const e=i.Z.get("admin"),s=JSON.parse(e);s||r("/"),w("name",s.name),w("email",s.email),u(s.img)}),[]),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:"bg-light min-vh-100",children:(0,m.jsx)(a.KB,{className:"mt-3",children:(0,m.jsx)(a.rb,{children:(0,m.jsx)(a.b7,{md:12,children:(0,m.jsxs)(a.xH,{children:[(0,m.jsx)(a.bn,{children:"Profile"}),(0,m.jsx)(a.sl,{children:(0,m.jsxs)(a.lx,{className:"row g-3",onSubmit:p((async e=>{try{h(!0);let s=new FormData;Object.keys(e).forEach((r=>{"image"===r&&e[r][0]?s.append(r,e[r][0]):s.append(r,e[r])}));const r=await(0,t.WY)(s);if(200===r.status){const s={name:e.name||x.name,id:x.id,email:e.email||x.email,role:x.role,img:""===j?x.img:r.data.baseUrl};i.Z.set("admin",JSON.stringify(s)),d.Am.success("Profile updated successfully")}h(!1)}catch(a){var s,r;console.log(a),h(!1),d.Am.error((null===(s=a.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"An error occurred")}})),children:[(0,m.jsxs)(a.b7,{xl:12,md:12,children:[(0,m.jsx)(a.L8,{children:"Name"}),(0,m.jsx)(a.jO,{type:"text",...g("name",{required:"Name is required"}),invalid:!!b.name}),(0,m.jsx)(a.CO,{invalid:!0,children:null===(e=b.name)||void 0===e?void 0:e.message})]}),(0,m.jsxs)(a.b7,{xl:12,md:12,children:[(0,m.jsx)(a.L8,{children:"Email"}),(0,m.jsx)(a.jO,{type:"email",...g("email",{required:"Email is required"}),invalid:!!b.email}),(0,m.jsx)(a.CO,{invalid:!0,children:null===(s=b.email)||void 0===s?void 0:s.message})]}),(0,m.jsxs)(a.b7,{xl:6,md:12,children:[(0,m.jsx)(a.L8,{children:"Image"}),(0,m.jsx)(a.jO,{type:"file",...g("image",{required:""===j&&"Image is required"}),accept:"image/*",name:"image",onChange:e=>{const s=e.target.files[0];if(s){const e=URL.createObjectURL(s);u(e)}else u("")}}),b.image&&(0,m.jsx)(a.CO,{invalid:!0,children:b.image.message})]}),(0,m.jsx)(a.b7,{md:5,children:j&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{children:"Image Preview"}),(0,m.jsx)("div",{className:"mb-4 text-center",children:(0,m.jsx)("img",{src:j,alt:"Profile Preview",style:{width:"150px",height:"150px",objectFit:"cover",borderRadius:"50%"}})})]})}),(0,m.jsx)(a.b7,{md:12,className:"text-center submitButton",children:o?(0,m.jsxs)(a.u5,{disabled:!0,children:[(0,m.jsx)(a.LQ,{component:"span",size:"sm","aria-hidden":"true"}),"Loading..."]}):(0,m.jsx)(a.u5,{type:"submit",className:"AddButton",children:"Update"})})]})})]})})})})})})},j=()=>(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"bg-light min-vh-100",children:[(0,m.jsx)(d.Ix,{}),(0,m.jsx)(a.KB,{className:"mt-3",children:(0,m.jsxs)(a.rb,{children:[(0,m.jsx)(a.b7,{md:6,children:(0,m.jsx)(h,{})}),(0,m.jsx)(a.b7,{md:6,children:(0,m.jsx)(o,{})})]})})]})})}}]);
//# sourceMappingURL=6104.6c4d270d.chunk.js.map