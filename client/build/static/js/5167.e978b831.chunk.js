"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5167],{15729:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var n=s(72791),a=s(28725),c=s(76794),r=s(24824),o=s(29900),l=s(62062),i=s.n(l),d=s(78983),u=s(90977),m=s(13838),h=s(57689),v=s(59434),y=s(89078),f=s(75985),A=(s(5462),s(80184));const x=()=>{const[e,t]=(0,n.useState)([]),[s,l]=(0,n.useState)(!1),x=(0,h.s0)(),j=(0,v.I0)(),p=(0,v.v9)((e=>e.auth)),[g,w]=(0,n.useState)([]),_=async()=>{l(!0);try{const e=(await(0,a.EY)()).data.info;if(Array.isArray(e)){const s=e.map((e=>({...e,modifydate:(0,a.vg)(e.date)})));t(s)}else t([])}catch(n){var e,s;console.error(n);const t=(null===(e=n.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"An error occurred";f.Am.error(t)}finally{l(!1)}};(0,n.useEffect)((()=>{(async()=>{await(0,a.VQ)(j),w(p.permission)})()}),[]),(0,n.useEffect)((()=>{_()}),[]);const Z=[{name:"title",label:"title",options:{filter:!0,sort:!0}},{name:"modifydate",label:"date",options:{filter:!0,sort:!0}}];(Array.isArray(g)&&g.includes("event.delete")||g.includes("event.edit"))&&Z.push({name:"_id",label:"Action",options:{filter:!1,sort:!1,customBodyRender:t=>(0,A.jsxs)(A.Fragment,{children:[Array.isArray(g)&&g.includes("event.edit")&&(0,A.jsx)(c.Z,{className:"editButton",onClick:()=>{const s=e.find((e=>e._id===t));x("/eventform",{state:{editData:s}})}}),Array.isArray(g)&&g.includes("event.delete")&&(0,A.jsx)(r.Z,{className:"deleteButton",onClick:async()=>{await i()({title:"Are you sure?",text:"Are you sure? Want to delete announcement?",icon:"warning",buttons:["No, cancel it!","Yes, I am sure!"],dangerMode:!0})&&(0,a.Bt)(t).then((()=>{_(),f.Am.success("Deleted successfully!"),i()({title:"Deleted successfully!",icon:"success",button:"close"})})).catch((e=>{var t,s;console.log(e);const n=(null===(t=e.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Something went wrong";f.Am.error(n)}))}})]})}});const b=t=>{let{selectedRows:s}=t;return(0,A.jsx)("div",{children:(0,A.jsx)(u.Z,{onClick:()=>(async t=>{const s=t.data.map((t=>e[t.dataIndex]._id));if(await i()({title:"Are you sure?",text:"Are you sure that you want to delete selected Event?",icon:"warning",buttons:["No, cancel it!","Yes, I am sure!"],dangerMode:!0})){const e={ids:s};(0,a.tG)(e).then((()=>{_(),f.Am.success("Deleted successfully!",{key:s.join(",")})})).catch((e=>{var t,s;f.Am.error((null===(t=e.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Something went wrong")}))}})(s),children:(0,A.jsx)(o.Z,{})})})},k={customToolbarSelect:e=>Array.isArray(g)&&g.includes("event.delete")&&(0,A.jsx)(b,{selectedRows:e})};return(0,A.jsx)(A.Fragment,{children:s?(0,A.jsx)("div",{className:"d-flex justify-content-center",children:(0,A.jsx)(d.LQ,{className:"theme-spinner-color"})}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(f.Ix,{}),Array.isArray(g)&&g.includes("event.add")&&(0,A.jsx)("div",{className:"right-text",children:(0,A.jsx)(m.Z,{variant:"contained",size:"medium",className:"AddButton",onClick:()=>x("/eventform"),children:"Add"})}),(0,A.jsx)(y.ZP,{title:"Event",data:e,columns:Z,options:k})]})})}},29900:(e,t,s)=>{s.d(t,{Z:()=>c});var n=s(76189),a=s(80184);const c=(0,n.Z)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},24824:(e,t,s)=>{s.d(t,{Z:()=>c});var n=s(76189),a=s(80184);const c=(0,n.Z)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2zM18 4h-2.5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1"}),"DeleteRounded")},76794:(e,t,s)=>{s.d(t,{Z:()=>c});var n=s(76189),a=s(80184);const c=(0,n.Z)((0,a.jsx)("path",{d:"M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1c-.1.1-.15.22-.15.36M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"EditRounded")}}]);
//# sourceMappingURL=5167.e978b831.chunk.js.map