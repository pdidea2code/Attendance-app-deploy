"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8082],{77136:(e,o,r)=>{r.r(o),r.d(o,{default:()=>p});var a=r(72791),t=r(28725),n=(r(62062),r(78983)),s=r(57689),d=r(59434),l=r(89078),i=r(75985),c=(r(5462),r(752),r(80184));const p=()=>{const[e,o]=(0,a.useState)([]),[r,p]=(0,a.useState)(""),[u,m]=(0,a.useState)(!1),f=((0,s.s0)(),(0,d.I0)()),b=(0,d.v9)((e=>e.auth)),[y,g]=(0,a.useState)([]),x=async()=>{try{const e=(await(0,t.Hx)()).data.info;if(Array.isArray(e)){const r=await e.map((e=>({...e,modifydate:(0,t.vg)(e.date),modifytodate:e.todate?(0,t.vg)(e.todate):"-",modifyhour:e.hour?"".concat(e.hour," Hour "):"-",modifyapprovebyname:e.approvebyname?e.approvebyname:"-",modiftuser_id:e.user_id.user_id?e.user_id.user_id:"-",username:e.user_id.name?e.user_id.name:"-"})));o(r)}}catch(a){var e,r;console.log(a),i.Am.error((null===(e=a.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||"An error occurred")}finally{m(!1)}},v=async(e,o)=>{try{const r={id:e._id,status:o},a=await(0,t.wv)(r);console.log(a)}catch(n){var r,a;console.log(n),i.Am.error((null===(r=n.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"An error occurred")}finally{x()}};(0,a.useEffect)((()=>{(async()=>{await(0,t.VQ)(f),g(b.permission)})()}),[]),(0,a.useEffect)((()=>{x()}),[]);const h=[{name:"modiftuser_id",label:"user_id",options:{filter:!0,sort:!0}},{name:"username",label:"name",options:{filter:!0,sort:!0}},{name:"modifydate",label:"date",options:{filter:!0,sort:!0}},{name:"modifytodate",label:"todate",options:{filter:!0,sort:!0}},{name:"modifyhour",label:"hour",options:{filter:!0,sort:!0}},{name:"type",label:"type",options:{filter:!0,sort:!0}},{name:"levaetype",label:"levaetype",options:{filter:!0,sort:!0}},{name:"day",label:"day",options:{filter:!0,sort:!0}},{name:"reson",label:"reson",options:{filter:!0,sort:!0}},{name:"modifyapprovebyname",label:"approveby",options:{filter:!0,sort:!0}},{name:"status",label:"status",options:{filter:!0,sort:!0,customBodyRender:e=>"Pending"===e?(0,c.jsx)("p",{style:{background:"#ffc800",color:"black",borderRadius:"20px",textAlign:"center",padding:"4px"},children:e}):"Rejected"===e?(0,c.jsx)("p",{style:{background:"red",color:"black",borderRadius:"20px",textAlign:"center",padding:"4px"},children:e}):"Approved"===e?(0,c.jsx)("p",{style:{background:"#00ff00",color:"black",borderRadius:"20px",textAlign:"center",padding:"4px"},children:e}):null}}];Array.isArray(y)&&y.includes("leave.edit")&&h.push({name:"_id",label:"Action",options:{filter:!1,sort:!1,customBodyRender:o=>{const r=e.find((e=>e._id===o));return"Approved"===r.status?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.u5,{className:"me-1 mb-1",style:{padding:"5px",background:"red",color:"black"},onClick:()=>{v(r,"Rejected")},children:"Reject"}),(0,c.jsx)(n.u5,{style:{padding:"5px",background:"#ffc800",color:"black"},onClick:()=>{v(r,"Pending")},children:"Pending"})]}):"Rejected"===r.status?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.u5,{className:"me-1 mb-1",style:{padding:"5px",background:"#00ff00",color:"black"},onClick:()=>{v(r,"Approved")},children:"Approv"}),(0,c.jsx)(n.u5,{style:{padding:"5px",background:"#ffc800",color:"black"},onClick:()=>{v(r,"Pending")},children:"Pending"})]}):"Pending"===r.status?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.u5,{className:"me-1 mb-1",style:{padding:"5px",background:"#00ff00",color:"black"},onClick:()=>{v(r,"Approved")},children:"Approv"}),(0,c.jsx)(n.u5,{style:{padding:"5px",background:"red",color:"black"},onClick:()=>{v(r,"Rejected")},children:"Reject"})]}):void 0}}});return(0,c.jsx)(c.Fragment,{children:u?(0,c.jsx)("div",{className:"d-flex justify-content-center",children:(0,c.jsx)(n.LQ,{className:"theme-spinner-color"})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.Ix,{}),(0,c.jsx)(l.ZP,{title:"Leave",data:e,columns:h,options:{},id:"leave"})]})})}}}]);
//# sourceMappingURL=8082.1567626e.chunk.js.map