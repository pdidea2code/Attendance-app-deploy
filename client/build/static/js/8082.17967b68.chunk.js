"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8082],{77136:(e,r,a)=>{a.r(r),a.d(r,{default:()=>p});var o=a(72791),t=a(28725),n=(a(62062),a(78983)),s=a(57689),d=a(59434),i=a(89078),l=a(75985),c=(a(5462),a(752),a(80184));const p=()=>{const[e,r]=(0,o.useState)([]),[a,p]=(0,o.useState)(""),[u,m]=(0,o.useState)(!1),f=((0,s.s0)(),(0,d.I0)()),b=(0,d.v9)((e=>e.auth)),[y,g]=(0,o.useState)([]),x=async()=>{try{const e=(await(0,t.Hx)()).data.info;if(Array.isArray(e)){const a=await e.map((e=>({...e,modifydate:(0,t.vg)(e.date),modifytodate:e.todate?(0,t.vg)(e.todate):"-",modifyhour:e.hour?"".concat(e.hour," Hour "):"-",modifyapprovebyname:e.approvebyname?e.approvebyname:"-",modiftuser_id:e.user_id.user_id?e.user_id.user_id:"-",username:e.user_id.name?e.user_id.name:"-"})));r(a)}}catch(o){var e,a;console.log(o),l.Am.error((null===(e=o.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"An error occurred")}finally{m(!1)}},v=async(e,r)=>{try{const a={id:e._id,status:r};await(0,t.wv)(a)}catch(n){var a,o;console.log(n),l.Am.error((null===(a=n.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message)||"An error occurred")}finally{x()}};(0,o.useEffect)((()=>{(async()=>{await(0,t.VQ)(f),g(b.permission)})()}),[]),(0,o.useEffect)((()=>{x()}),[]);const h=[{name:"modiftuser_id",label:"user_id",options:{filter:!0,sort:!0}},{name:"username",label:"name",options:{filter:!0,sort:!0}},{name:"modifydate",label:"date",options:{filter:!0,sort:!0}},{name:"modifytodate",label:"todate",options:{filter:!0,sort:!0}},{name:"modifyhour",label:"hour",options:{filter:!0,sort:!0}},{name:"type",label:"type",options:{filter:!0,sort:!0}},{name:"levaetype",label:"levaetype",options:{filter:!0,sort:!0}},{name:"day",label:"day",options:{filter:!0,sort:!0}},{name:"reson",label:"reson",options:{filter:!0,sort:!0}},{name:"modifyapprovebyname",label:"approveby",options:{filter:!0,sort:!0}},{name:"status",label:"status",options:{filter:!0,sort:!0,customBodyRender:e=>"Pending"===e?(0,c.jsx)("p",{style:{background:"#ffc800",color:"black",borderRadius:"20px",textAlign:"center",padding:"4px"},children:e}):"Rejected"===e?(0,c.jsx)("p",{style:{background:"red",color:"black",borderRadius:"20px",textAlign:"center",padding:"4px"},children:e}):"Approved"===e?(0,c.jsx)("p",{style:{background:"#00ff00",color:"black",borderRadius:"20px",textAlign:"center",padding:"4px"},children:e}):null}}];Array.isArray(y)&&y.includes("leave.edit")&&h.push({name:"_id",label:"Action",options:{filter:!1,sort:!1,customBodyRender:r=>{const a=e.find((e=>e._id===r));return"Approved"===a.status?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.u5,{className:"me-1 mb-1",style:{padding:"5px",background:"red",color:"black"},onClick:()=>{v(a,"Rejected")},children:"Reject"}),(0,c.jsx)(n.u5,{style:{padding:"5px",background:"#ffc800",color:"black"},onClick:()=>{v(a,"Pending")},children:"Pending"})]}):"Rejected"===a.status?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.u5,{className:"me-1 mb-1",style:{padding:"5px",background:"#00ff00",color:"black"},onClick:()=>{v(a,"Approved")},children:"Approv"}),(0,c.jsx)(n.u5,{style:{padding:"5px",background:"#ffc800",color:"black"},onClick:()=>{v(a,"Pending")},children:"Pending"})]}):"Pending"===a.status?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.u5,{className:"me-1 mb-1",style:{padding:"5px",background:"#00ff00",color:"black"},onClick:()=>{v(a,"Approved")},children:"Approv"}),(0,c.jsx)(n.u5,{style:{padding:"5px",background:"red",color:"black"},onClick:()=>{v(a,"Rejected")},children:"Reject"})]}):void 0}}});return(0,c.jsx)(c.Fragment,{children:u?(0,c.jsx)("div",{className:"d-flex justify-content-center",children:(0,c.jsx)(n.LQ,{className:"theme-spinner-color"})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.Ix,{}),(0,c.jsx)(i.ZP,{title:"Leave",data:e,columns:h,options:{},id:"leave"})]})})}}}]);
//# sourceMappingURL=8082.17967b68.chunk.js.map