"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2508],{28725:(e,t,a)=>{a.d(t,{SU:()=>me,kA:()=>w,vj:()=>P,CP:()=>x,vP:()=>Y,DK:()=>R,N$:()=>F,zJ:()=>v,_d:()=>p,Cp:()=>g,WY:()=>u,wv:()=>ne,AT:()=>k,vg:()=>ce,jP:()=>b,_5:()=>V,Bt:()=>J,qd:()=>L,yu:()=>K,_2:()=>_,Rk:()=>E,tG:()=>T,YA:()=>O,DI:()=>Q,g1:()=>y,Rd:()=>z,Q3:()=>j,O8:()=>f,k5:()=>N,w7:()=>te,LH:()=>se,EY:()=>U,Ro:()=>re,HK:()=>C,Ir:()=>de,jw:()=>D,Yj:()=>B,cY:()=>A,$8:()=>W,Sk:()=>ee,MV:()=>X,QI:()=>ae,Hx:()=>oe,br:()=>Z,VQ:()=>le,x4:()=>c,gq:()=>he,c0:()=>m,aY:()=>l,aq:()=>M,mW:()=>H,lt:()=>S,eJ:()=>q,sZ:()=>ie,PS:()=>I,aM:()=>G,m7:()=>$,y1:()=>h});var n=a(12903),o=a(88329),r=a(72791);const i="https://attendance-app-deploy.onrender.com";var s=a(5695),d=(a(59434),a(80184));n.Z.interceptors.response.use((e=>e),(async e=>{console.log(e);const t=e.config;if(402==e.status&&!t._retry){t._retry=!0;try{const e=o.Z.get("refreshToken"),a=(await n.Z.post("".concat(i,"/admin/refreshToken"),{refreshToken:e})).data.info;return o.Z.set("token",a,{sameSite:"Strict",secure:!0}),t.headers.Authorization="Bearer ".concat(a),(0,n.Z)(t)}catch(a){}}return 405===e.response.status&&o.Z.remove("accessToken"),Promise.reject(e)}));const c=e=>n.Z.post(i+"/admin/login",e),l=e=>n.Z.post(i+"/admin/checkEmailId",e),h=e=>n.Z.post(i+"/admin/verifyLink",e),m=e=>n.Z.post(i+"/admin/resetPassword",e),g=e=>n.Z.post(i+"/admin/changePassword",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),u=e=>n.Z.post(i+"/admin/changeProfile",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),Z=()=>n.Z.get(i+"/admin/role/getAllRole",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),p=e=>n.Z.post(i+"/admin/role/addRole",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),A=()=>n.Z.get(i+"/admin/role/getRolle",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),k=e=>n.Z.post(i+"/admin/role/changePermission",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),z=e=>n.Z.post(i+"/admin/role/deleteRole",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),B=e=>n.Z.get(i+"/admin/permission/permissions",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),y=e=>n.Z.delete(i+"/admin/permission/deletePermission/"+e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),v=e=>n.Z.post(i+"/admin/permission/addPermission",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),f=()=>n.Z.get(i+"/admin/employee/getAllUser",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),x=e=>n.Z.post(i+"/admin/employee/addUser",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),S=(e,t)=>n.Z.post(i+"/admin/employee/updateUser/"+e,t,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),j=()=>n.Z.get(i+"/admin/admins/getAllAdmin",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),w=e=>n.Z.post(i+"/admin/admins/addAdmin",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),M=(e,t)=>n.Z.post(i+"/admin/admins/updateAdmin/"+e,t,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),b=e=>n.Z.get(i+"/admin/admins/deleteAdmin/"+e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),_=e=>n.Z.post(i+"/admin/admins/deleteManyAdmin",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),N=e=>n.Z.get(i+"/admin/announcement/getAllAnnouncement",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),P=e=>n.Z.post(i+"/admin/announcement/addAnnouncement",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),H=e=>n.Z.post(i+"/admin/announcement/updateAnnouncement",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),V=e=>n.Z.get(i+"/admin/announcement/deleteAnnouncement/"+e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),E=e=>n.Z.post(i+"/admin/announcement/deleteManyAnnouncement",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),C=()=>n.Z.get(i+"/admin/holiday/getAllHolidays",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),R=e=>n.Z.post(i+"/admin/holiday/addHoliday",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),I=e=>n.Z.post(i+"/admin/holiday/updateHoliday",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),L=e=>n.Z.post(i+"/admin/holiday/deleteHoliday/"+e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),O=e=>n.Z.post(i+"/admin/holiday/deleteMultiHoliday",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),U=()=>n.Z.get(i+"/admin/event/getAllEvents",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),Y=e=>n.Z.post(i+"/admin/event/addEvent",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),q=e=>n.Z.post(i+"/admin/event/updateEvent",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),J=e=>n.Z.post(i+"/admin/event/deleteEvent/"+e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),T=e=>n.Z.post(i+"/admin/event/deleteMultiEvent",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),D=()=>n.Z.get(i+"/admin/month/getMonth",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),F=e=>n.Z.post(i+"/admin/month/addMonth",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),G=e=>n.Z.post(i+"/admin/month/updateMonth ",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),K=e=>n.Z.post(i+"/admin/month/deleteMonth/"+e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),Q=e=>n.Z.post(i+"/admin/month/deleteMultiMonth",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),W=()=>n.Z.get(i+"/admin/setting/getSetting",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),$=e=>n.Z.post(i+"/admin/setting/updateSetting",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),X=e=>n.Z.post(i+"/admin/attendance/getUseridAttendance",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),ee=e=>n.Z.post(i+"/admin/attendance/getMonthAttendance",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),te=e=>n.Z.post(i+"/admin/attendance/getAllAttendance",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),ae=e=>n.Z.post(i+"/admin/leave/getUserLeave",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),ne=e=>n.Z.post(i+"/admin/leave/changeStatus",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),oe=()=>n.Z.post(i+"/admin/leave/getallLeave",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),re=()=>n.Z.get(i+"/admin/generalsetting/getGeneralsetting",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),ie=e=>n.Z.post(i+"/admin/generalsetting/updateGeneralsetting",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),se=()=>n.Z.get(i+"/admin/dashbord/getAttendanceCount",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),de=()=>n.Z.get(i+"/admin/dashbord/leaveRequest",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}});function ce(e){const t=new Date(e),a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(o)}const le=async e=>{try{const t=(await A()).data.info;o.Z.set("role",JSON.stringify(t.role)),o.Z.set("permission",JSON.stringify(t.permissions)),e({type:s.g3,role:t.role,permission:t.permissions})}catch(t){console.log(t)}},he=e=>{const t=Math.floor(e/60),a=e%60;return"".concat(String(t).padStart(2,"0"),":").concat(String(a).padStart(2,"0"))},me=()=>{const[e,t]=(0,r.useState)(new Date);(0,r.useEffect)((()=>{const e=setInterval((()=>{t(new Date)}),1e3);return()=>clearInterval(e)}),[]);return(0,d.jsx)("div",{style:{fontSize:"16px",fontFamily:"Arial, sans-serif",backgroundColor:"gray",color:"white",padding:"5px",borderRadius:"20px"},children:(e=>{let t=e.getHours();const a=String(e.getMinutes()).padStart(2,"0"),n=String(e.getSeconds()).padStart(2,"0"),o=t>=12?"PM":"AM";return t%=12,t=t||12,t=String(t).padStart(2,"0"),"".concat(t,":").concat(a,":").concat(n," ").concat(o)})(e)})}},23024:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var n=a(72791),o=a(57689),r=a(11087),i=a(78983),s=a(24846),d=a(99161),c=a(93647),l=a(61134),h=a(28725),m=a(75985),g=(a(5462),a(88329)),u=a(59434),Z=a(5695),p=a(80184);const A=()=>{var e,t;const[a,A]=(0,n.useState)(!1),[k,z]=(0,n.useState)(""),{register:B,handleSubmit:y,formState:{errors:v}}=(0,l.cI)(),f=(0,o.s0)(),x=(0,u.I0)(),[S,j]=(0,n.useState)({}),[w,M]=(0,n.useState)([]);return(0,p.jsx)("div",{className:"bg-light min-vh-100 d-flex flex-row align-items-center",children:(0,p.jsxs)(i.KB,{children:[(0,p.jsx)(m.Ix,{}),(0,p.jsx)(i.rb,{className:"justify-content-center",children:(0,p.jsx)(i.b7,{md:5,children:(0,p.jsx)(i.dL,{children:(0,p.jsx)(i.xH,{className:"p-4 col-md-7",children:(0,p.jsx)(i.sl,{children:(0,p.jsxs)(i.lx,{onSubmit:y((async e=>{z(""),A(!0);try{const t=await(0,h.x4)(e);if(400===t.status||!1===t.data.success)z(t.data.message),A(!1);else{g.Z.set("token",t.data.info.token),g.Z.set("refreshToken",t.data.info.refreshToken);const e={name:t.data.info.admin.name,id:t.data.info.admin._id,email:t.data.info.admin.email,role:t.data.info.admin.role.name,img:t.data.info.admin.image?t.data.baseUrl+t.data.info.admin.image:null};g.Z.set("admin",JSON.stringify(e));try{const t=(await(0,h.cY)()).data.info;j({role:t.role,_id:t._id}),M(t.permissions),g.Z.set("role",JSON.stringify(t.role)),g.Z.set("permission",JSON.stringify(t.permissions)),x({type:Z.XP,data:e}),x({type:Z.g3,role:t.role,permission:t.permissions}),A(!1),f("/dashboard")}catch(k){console.log(k),A(!1),z("Failed to fetch user role and permissions.")}}}catch(t){console.log(t);const e=t.response&&t.response.data&&t.response.data.message?t.response.data.message:"An error occurred while logging in. Please try again.";z(e),A(!1)}})),children:[(0,p.jsx)("h1",{children:"Login"}),(0,p.jsx)("p",{className:"text-medium-emphasis",children:"Sign In to your account"}),k&&(0,p.jsx)("p",{className:"errors",children:k}),(0,p.jsxs)(i.YR,{className:"mb-3",children:[(0,p.jsx)(i.wV,{children:(0,p.jsx)(s.Z,{icon:d.E})}),(0,p.jsx)(i.jO,{type:"email",placeholder:"Email",...B("email",{required:"Email is required"}),invalid:!!v.email}),(0,p.jsx)(i.CO,{invalid:!0,children:null===(e=v.email)||void 0===e?void 0:e.message})]}),(0,p.jsxs)(i.YR,{className:"mb-4",children:[(0,p.jsx)(i.wV,{children:(0,p.jsx)(s.Z,{icon:c.U})}),(0,p.jsx)(i.jO,{type:"password",placeholder:"Password",autoComplete:"current-password",...B("password",{required:"Password is required"}),invalid:!!v.password}),(0,p.jsx)(i.CO,{invalid:!0,children:null===(t=v.password)||void 0===t?void 0:t.message})]}),(0,p.jsxs)(i.rb,{children:[(0,p.jsx)(i.b7,{xs:6,children:(0,p.jsx)(i.u5,{color:"primary",type:"submit",className:"px-4",disabled:a,children:a?"Loading...":"Login"})}),(0,p.jsx)(i.b7,{xs:6,className:"text-right",children:(0,p.jsx)(r.rU,{to:"/forgotpassword",children:(0,p.jsx)(i.u5,{color:"link",className:"px-0",children:"Forgot password?"})})})]})]})})})})})})]})})}},93647:(e,t,a)=>{a.d(t,{U:()=>n});var n=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M384,200V144a128,128,0,0,0-256,0v56H88V328c0,92.635,75.364,168,168,168s168-75.365,168-168V200ZM160,144a96,96,0,0,1,192,0v56H160ZM392,328c0,74.99-61.01,136-136,136s-136-61.01-136-136V232H392Z' class='ci-primary'/>"]},99161:(e,t,a)=>{a.d(t,{E:()=>n});var n=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M411.6,343.656l-72.823-47.334,27.455-50.334A80.23,80.23,0,0,0,376,207.681V128a112,112,0,0,0-224,0v79.681a80.236,80.236,0,0,0,9.768,38.308l27.455,50.333L116.4,343.656A79.725,79.725,0,0,0,80,410.732V496H448V410.732A79.727,79.727,0,0,0,411.6,343.656ZM416,464H112V410.732a47.836,47.836,0,0,1,21.841-40.246l97.66-63.479-41.64-76.341A48.146,48.146,0,0,1,184,207.681V128a80,80,0,0,1,160,0v79.681a48.146,48.146,0,0,1-5.861,22.985L296.5,307.007l97.662,63.479h0A47.836,47.836,0,0,1,416,410.732Z' class='ci-primary'/>"]}}]);
//# sourceMappingURL=2508.2b9a8342.chunk.js.map