"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7704],{10455:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var s=n(72791),a=n(28725),c=n(76794),o=n(24824),r=n(29900),l=n(62062),i=n.n(l),d=(n(88329),n(78983)),u=n(90977),m=n(13838),h=n(57689),x=n(59434),y=n(89078),p=n(75985),f=(n(5462),n(80184));const g=()=>{const[e,t]=(0,s.useState)([]),[n,l]=(0,s.useState)(""),[g,v]=(0,s.useState)(!1),A=(0,h.s0)(),j=(0,x.I0)(),w=(0,x.v9)((e=>e.auth)),[_,b]=(0,s.useState)([]),Z=async()=>{try{v(!0);const e=await(0,a.k5)(),n=e.data.info;t(n),l(e.data.baseUrl)}catch(s){var e,n;console.log(s),p.Am.error((null===(e=s.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)||"Failed to fetch roles")}finally{v(!1)}};(0,s.useEffect)((()=>{(async()=>{await(0,a.VQ)(j),b(w.permission)})()}),[]),(0,s.useEffect)((()=>{Z()}),[]);const k=[{name:"title",label:"title",options:{filter:!0,sort:!0}},{name:"description",label:"description",options:{filter:!0,sort:!0}},{name:"date",label:"date",options:{filter:!0,sort:!1}},{name:"image",label:"image",options:{filter:!1,sort:!1,customBodyRender:e=>e?(0,f.jsx)("img",{src:"".concat(n).concat(e),alt:e,style:{height:"60px",width:"60px",borderRadius:"10px"}}):(0,f.jsx)("span",{children:"Not Image"})}}];(Array.isArray(_)&&_.includes("announcement.delete")||_.includes("announcement.edit"))&&k.push({name:"_id",label:"Action",options:{filter:!1,sort:!1,customBodyRender:t=>(0,f.jsxs)(f.Fragment,{children:[Array.isArray(_)&&_.includes("announcement.edit")&&(0,f.jsx)(c.Z,{className:"editButton",onClick:()=>{const s=e.find((e=>e._id===t));A("/announcementform",{state:{editData:s,imageUrl:n}})}}),Array.isArray(_)&&_.includes("announcement.delete")&&(0,f.jsx)(o.Z,{className:"deleteButton",onClick:async()=>{await i()({title:"Are you sure?",text:"Are you sure? Want to delete announcement?",icon:"warning",buttons:["No, cancel it!","Yes, I am sure!"],dangerMode:!0})&&(0,a._5)(t).then((()=>{Z(),p.Am.success("Deleted successfully!"),i()({title:"Deleted successfully!",icon:"success",button:"close"})})).catch((e=>{var t,n;console.log(e);const s=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Something went wrong";p.Am.error(s)}))}})]})}});const N=t=>{let{selectedRows:n}=t;return(0,f.jsx)("div",{children:(0,f.jsx)(u.Z,{onClick:()=>(async t=>{const n=t.data.map((t=>e[t.dataIndex]._id));if(await i()({title:"Are you sure?",text:"Are you sure that you want to delete selected Announcement?",icon:"warning",buttons:["No, cancel it!","Yes, I am sure!"],dangerMode:!0})){const e={ids:n};(0,a.Rk)(e).then((()=>{Z(),p.Am.success("Deleted successfully!",{key:n.join(",")})})).catch((e=>{var t,n;p.Am.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Something went wrong")}))}})(n),children:(0,f.jsx)(r.Z,{})})})},M={customToolbarSelect:e=>Array.isArray(_)&&_.includes("announcement.delete")&&(0,f.jsx)(N,{selectedRows:e})};return(0,f.jsx)(f.Fragment,{children:g?(0,f.jsx)("div",{className:"d-flex justify-content-center",children:(0,f.jsx)(d.LQ,{className:"theme-spinner-color"})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.Ix,{}),Array.isArray(_)&&_.includes("announcement.add")&&(0,f.jsx)("div",{className:"right-text",children:(0,f.jsx)(m.Z,{variant:"contained",size:"medium",className:"AddButton",onClick:()=>A("/announcementform"),children:"Add"})}),(0,f.jsx)(y.ZP,{title:"announcement",data:e,columns:k,options:M})]})})}},29900:(e,t,n)=>{n.d(t,{Z:()=>c});var s=n(76189),a=n(80184);const c=(0,s.Z)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},24824:(e,t,n)=>{n.d(t,{Z:()=>c});var s=n(76189),a=n(80184);const c=(0,s.Z)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2zM18 4h-2.5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1"}),"DeleteRounded")},76794:(e,t,n)=>{n.d(t,{Z:()=>c});var s=n(76189),a=n(80184);const c=(0,s.Z)((0,a.jsx)("path",{d:"M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1c-.1.1-.15.22-.15.36M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"EditRounded")}}]);
//# sourceMappingURL=7704.289f6436.chunk.js.map