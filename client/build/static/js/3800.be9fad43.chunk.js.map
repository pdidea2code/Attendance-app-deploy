{"version":3,"file":"static/js/3800.be9fad43.chunk.js","mappings":"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","sources":["views/dashboard/Leaverequest.js","views/dashboard/Dashboard.js"],"sourcesContent":["import { CButton, CSpinner } from '@coreui/react'\nimport MUIDataTable from 'mui-datatables'\nimport { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { ToastContainer, toast } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\nimport { changeStatus, convertToDDMMYYYY, getLeaveRequest, getRole } from 'src/redux/api/api'\nconst Leaverequest = () => {\n  const [dataTableData, setDataTabledata] = useState([])\n  const [isLoading, setIsLoading] = useState(false)\n  const dispatch = useDispatch()\n  const auth = useSelector((state) => state.auth)\n  const [permission, setPermissions] = useState([])\n  const Leaverequests = async () => {\n    try {\n      const res = await getLeaveRequest()\n      const data = res.data.info\n      // console.log(data)\n      if (Array.isArray(data)) {\n        const formattedData = await data.map((item) => ({\n          ...item,\n          modifydate: convertToDDMMYYYY(item.date),\n          modifytodate: item.todate ? convertToDDMMYYYY(item.todate) : '-',\n          modifyhour: item.hour ? `${item.hour} Hour ` : '-',\n          modifyapprovebyname: item.approvebyname ? item.approvebyname : '-',\n          modiftuser_id: item.user_id.user_id ? item.user_id.user_id : '-',\n          username: item.user_id.name ? item.user_id.name : '-',\n        }))\n        // console.log(formattedData)\n        setDataTabledata(formattedData)\n      }\n    } catch (error) {\n      console.log(error)\n      toast.error(error.response?.data?.message || 'An error occurred')\n    }\n  }\n\n  const changestatus = async (data, status) => {\n    try {\n      const req = {\n        id: data._id,\n        status: status,\n      }\n      const res = await changeStatus(req)\n      // console.log(res)\n    } catch (error) {\n      console.log(error)\n      toast.error(error.response?.data?.message || 'An error occurred')\n    } finally {\n      Leaverequests()\n    }\n  }\n\n  useEffect(() => {\n    const fetchPermissions = async () => {\n      await getRole(dispatch)\n      setPermissions(auth.permission)\n    }\n    fetchPermissions()\n  }, [])\n  useEffect(() => {\n    Leaverequests()\n  }, [])\n\n  const columns = [\n    {\n      name: 'modiftuser_id',\n      label: 'user_id',\n      options: {\n        filter: true,\n        sort: true,\n      },\n    },\n    {\n      name: 'username',\n      label: 'name',\n      options: {\n        filter: true,\n        sort: true,\n      },\n    },\n    {\n      name: 'modifydate',\n      label: 'date',\n      options: {\n        filter: true,\n        sort: true,\n      },\n    },\n    {\n      name: 'modifytodate',\n      label: 'todate',\n      options: {\n        filter: true,\n        sort: true,\n      },\n    },\n    {\n      name: 'modifyhour',\n      label: 'hour',\n      options: {\n        filter: true,\n        sort: true,\n      },\n    },\n\n    {\n      name: 'type',\n      label: 'type',\n      options: {\n        filter: true,\n        sort: true,\n      },\n    },\n    {\n      name: 'levaetype',\n      label: 'levaetype',\n      options: {\n        filter: true,\n        sort: true,\n      },\n    },\n    {\n      name: 'day',\n      label: 'day',\n      options: {\n        filter: true,\n        sort: true,\n      },\n    },\n\n    {\n      name: 'reson',\n      label: 'reson',\n      options: {\n        filter: true,\n        sort: true,\n      },\n    },\n    {\n      name: 'modifyapprovebyname',\n      label: 'approveby',\n      options: {\n        filter: true,\n        sort: true,\n      },\n    },\n    {\n      name: 'status',\n      label: 'status',\n      options: {\n        filter: true,\n        sort: true,\n        customBodyRender: (status) => {\n          if (status === 'Pending') {\n            return (\n              <p\n                style={{\n                  background: '#ffc800',\n                  color: 'black',\n                  borderRadius: '20px',\n                  textAlign: 'center',\n                  padding: '4px',\n                }}\n              >\n                {status}\n              </p>\n            )\n          } else if (status === 'Rejected') {\n            return (\n              <p\n                style={{\n                  background: 'red',\n                  color: 'black',\n                  borderRadius: '20px',\n                  textAlign: 'center',\n                  padding: '4px',\n                }}\n              >\n                {status}\n              </p>\n            )\n          } else if (status === 'Approved') {\n            return (\n              <p\n                style={{\n                  background: '#00ff00',\n                  color: 'black',\n                  borderRadius: '20px',\n                  textAlign: 'center',\n                  padding: '4px',\n                }}\n              >\n                {status}\n              </p>\n            )\n          }\n          return null // return null for any other status\n        },\n      },\n    },\n  ]\n\n  if (Array.isArray(permission) && permission.includes('leave.edit')) {\n    columns.push({\n      name: '_id',\n      label: 'Action',\n      options: {\n        filter: false,\n        sort: false,\n        customBodyRender: (value) => {\n          const editData = dataTableData.find((data) => data._id === value)\n\n          if (editData.status === 'Approved') {\n            return (\n              <>\n                <CButton\n                  className=\"me-1 mb-1\"\n                  style={{ padding: '5px', background: 'red', color: 'black' }}\n                  onClick={() => {\n                    changestatus(editData, 'Rejected')\n                  }}\n                >\n                  Reject\n                </CButton>\n                <CButton\n                  style={{ padding: '5px', background: '#ffc800', color: 'black' }}\n                  onClick={() => {\n                    changestatus(editData, 'Pending')\n                  }}\n                >\n                  Pending\n                </CButton>\n              </>\n            )\n          } else if (editData.status === 'Rejected') {\n            return (\n              <>\n                <CButton\n                  className=\"me-1 mb-1\"\n                  style={{ padding: '5px', background: '#00ff00', color: 'black' }}\n                  onClick={() => {\n                    changestatus(editData, 'Approved')\n                  }}\n                >\n                  Approv\n                </CButton>\n                <CButton\n                  style={{ padding: '5px', background: '#ffc800', color: 'black' }}\n                  onClick={() => {\n                    changestatus(editData, 'Pending')\n                  }}\n                >\n                  Pending\n                </CButton>\n              </>\n            )\n          } else if (editData.status === 'Pending') {\n            return (\n              <>\n                <CButton\n                  className=\"me-1 mb-1\"\n                  style={{ padding: '5px', background: '#00ff00', color: 'black' }}\n                  onClick={() => {\n                    changestatus(editData, 'Approved')\n                  }}\n                >\n                  Approv\n                </CButton>\n                <CButton\n                  style={{ padding: '5px', background: 'red', color: 'black' }}\n                  onClick={() => {\n                    changestatus(editData, 'Rejected')\n                  }}\n                >\n                  Reject\n                </CButton>\n              </>\n            )\n          }\n        },\n      },\n    })\n  }\n\n  const options = { rowsPerPage: 5, rowsPerPageOptions: [5, 10, 15, 20] }\n  return (\n    <>\n      {isLoading ? (\n        <div className=\"d-flex justify-content-center\">\n          <CSpinner className=\"theme-spinner-color\" />\n        </div>\n      ) : (\n        <MUIDataTable title={'Leave'} data={dataTableData} columns={columns} options={options} />\n      )}\n    </>\n  )\n}\n\nexport default Leaverequest\n","import React, { useEffect, useState } from 'react'\nimport { ToastContainer, toast } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\nimport {\n  CAvatar,\n  CButton,\n  CButtonGroup,\n  CCard,\n  CCardBody,\n  CCardFooter,\n  CCardHeader,\n  CCol,\n  CProgress,\n  CRow,\n  CTable,\n  CTableBody,\n  CTableDataCell,\n  CTableHead,\n  CTableHeaderCell,\n  CTableRow,\n} from '@coreui/react'\n\nimport WidgetsBrand from '../widgets/WidgetsBrand'\nimport WidgetsDropdown from '../widgets/WidgetsDropdown'\nimport Leaverequest from './Leaverequest'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { getRole } from 'src/redux/api/api'\n\nconst Dashboard = () => {\n  const dispatch = useDispatch()\n  const auth = useSelector((state) => state.auth)\n  const [permission, setPermissions] = useState([])\n\n  useEffect(() => {\n    const fetchPermissions = async () => {\n      await getRole(dispatch)\n      setPermissions(auth.permission)\n    }\n    fetchPermissions()\n  }, [])\n  return (\n    <>\n      <ToastContainer />\n      <WidgetsDropdown />\n      <CRow>\n        {Array.isArray(permission) && permission.includes('leave.view') && (\n          <CCol md={12} xl={12}>\n            <Leaverequest />\n          </CCol>\n        )}\n      </CRow>\n    </>\n  )\n}\n\nexport default Dashboard\n"],"names":["Leaverequest","dataTableData","setDataTabledata","useState","isLoading","setIsLoading","dispatch","useDispatch","auth","useSelector","state","permission","setPermissions","Leaverequests","async","data","getLeaveRequest","info","Array","isArray","formattedData","map","item","modifydate","convertToDDMMYYYY","date","modifytodate","todate","modifyhour","hour","concat","modifyapprovebyname","approvebyname","modiftuser_id","user_id","username","name","error","_error$response","_error$response$data","console","log","toast","response","message","changestatus","status","req","id","_id","changeStatus","_error$response2","_error$response2$data","useEffect","getRole","fetchPermissions","columns","label","options","filter","sort","customBodyRender","_jsx","style","background","color","borderRadius","textAlign","padding","children","includes","push","value","editData","find","_jsxs","_Fragment","CButton","className","onClick","CSpinner","MUIDataTable","title","rowsPerPage","rowsPerPageOptions","Dashboard","ToastContainer","WidgetsDropdown","CRow","CCol","md","xl"],"sourceRoot":""}