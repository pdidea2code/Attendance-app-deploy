"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3800],{96318:(e,r,a)=>{a.r(r),a.d(r,{default:()=>u});var o=a(72791),t=a(75985),s=(a(5462),a(78983)),n=(a(96558),a(8379)),i=a(89078),d=a(59434),l=a(28725),c=a(80184);const p=()=>{const[e,r]=(0,o.useState)([]),[a,n]=(0,o.useState)(!1),p=(0,d.I0)(),u=(0,d.v9)((e=>e.auth)),[m,f]=(0,o.useState)([]),b=async()=>{try{const e=(await(0,l.Ir)()).data.info;if(Array.isArray(e)){const a=await e.map((e=>({...e,modifydate:(0,l.vg)(e.date),modifytodate:e.todate?(0,l.vg)(e.todate):"-",modifyhour:e.hour?"".concat(e.hour," Hour "):"-",modifyapprovebyname:e.approvebyname?e.approvebyname:"-",modiftuser_id:e.user_id.user_id?e.user_id.user_id:"-",username:e.user_id.name?e.user_id.name:"-"})));r(a)}}catch(o){var e,a;console.log(o),t.Am.error((null===(e=o.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"An error occurred")}},y=async(e,r)=>{try{const a={id:e._id,status:r};await(0,l.wv)(a)}catch(s){var a,o;console.log(s),t.Am.error((null===(a=s.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message)||"An error occurred")}finally{b()}};(0,o.useEffect)((()=>{(async()=>{await(0,l.cY)(p),f(u.permission)})()}),[]),(0,o.useEffect)((()=>{b()}),[]);const g=[{name:"modiftuser_id",label:"user_id",options:{filter:!0,sort:!0}},{name:"username",label:"name",options:{filter:!0,sort:!0}},{name:"modifydate",label:"date",options:{filter:!0,sort:!0}},{name:"modifytodate",label:"todate",options:{filter:!0,sort:!0}},{name:"modifyhour",label:"hour",options:{filter:!0,sort:!0}},{name:"type",label:"type",options:{filter:!0,sort:!0}},{name:"levaetype",label:"levaetype",options:{filter:!0,sort:!0}},{name:"day",label:"day",options:{filter:!0,sort:!0}},{name:"reson",label:"reson",options:{filter:!0,sort:!0}},{name:"modifyapprovebyname",label:"approveby",options:{filter:!0,sort:!0}},{name:"status",label:"status",options:{filter:!0,sort:!0,customBodyRender:e=>"Pending"===e?(0,c.jsx)("p",{style:{background:"#ffc800",color:"black",borderRadius:"20px",textAlign:"center",padding:"4px"},children:e}):"Rejected"===e?(0,c.jsx)("p",{style:{background:"red",color:"black",borderRadius:"20px",textAlign:"center",padding:"4px"},children:e}):"Approved"===e?(0,c.jsx)("p",{style:{background:"#00ff00",color:"black",borderRadius:"20px",textAlign:"center",padding:"4px"},children:e}):null}}];Array.isArray(m)&&m.includes("leave.edit")&&g.push({name:"_id",label:"Action",options:{filter:!1,sort:!1,customBodyRender:r=>{const a=e.find((e=>e._id===r));return"Approved"===a.status?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.u5,{className:"me-1 mb-1",style:{padding:"5px",background:"red",color:"black"},onClick:()=>{y(a,"Rejected")},children:"Reject"}),(0,c.jsx)(s.u5,{style:{padding:"5px",background:"#ffc800",color:"black"},onClick:()=>{y(a,"Pending")},children:"Pending"})]}):"Rejected"===a.status?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.u5,{className:"me-1 mb-1",style:{padding:"5px",background:"#00ff00",color:"black"},onClick:()=>{y(a,"Approved")},children:"Approv"}),(0,c.jsx)(s.u5,{style:{padding:"5px",background:"#ffc800",color:"black"},onClick:()=>{y(a,"Pending")},children:"Pending"})]}):"Pending"===a.status?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.u5,{className:"me-1 mb-1",style:{padding:"5px",background:"#00ff00",color:"black"},onClick:()=>{y(a,"Approved")},children:"Approv"}),(0,c.jsx)(s.u5,{style:{padding:"5px",background:"red",color:"black"},onClick:()=>{y(a,"Rejected")},children:"Reject"})]}):void 0}}});return(0,c.jsx)(c.Fragment,{children:a?(0,c.jsx)("div",{className:"d-flex justify-content-center",children:(0,c.jsx)(s.LQ,{className:"theme-spinner-color"})}):(0,c.jsx)(i.ZP,{title:"Leave",data:e,columns:g,options:{rowsPerPage:5,rowsPerPageOptions:[5,10,15,20]}})})},u=()=>{const e=(0,d.I0)(),r=(0,d.v9)((e=>e.auth)),[a,i]=(0,o.useState)([]);return(0,o.useEffect)((()=>{(async()=>{await(0,l.cY)(e),i(r.permission)})()}),[]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(t.Ix,{}),(0,c.jsx)(n.Z,{}),(0,c.jsx)(s.rb,{children:Array.isArray(a)&&a.includes("leave.view")&&(0,c.jsx)(s.b7,{md:12,xl:12,children:(0,c.jsx)(p,{})})})]})}}}]);
//# sourceMappingURL=3800.be9fad43.chunk.js.map