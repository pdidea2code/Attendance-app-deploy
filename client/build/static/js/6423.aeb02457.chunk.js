"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6423],{49275:(e,s,a)=>{a.r(s),a.d(s,{default:()=>c});var r=a(72791),i=a(61134),l=a(57689),d=a(78983),n=a(75985),t=(a(5462),a(28725)),o=a(80184);const c=()=>{var e,s;const{register:a,handleSubmit:c,formState:{errors:m},setValue:h,watch:u}=(0,i.cI)(),{state:x}=(0,l.TH)(),[j,p]=(0,r.useState)(""),[v,g]=(0,r.useState)(!1),[w,b]=(0,r.useState)(""),[f,_]=(0,r.useState)([]),[O,C]=(0,r.useState)(""),q=(0,l.s0)();(0,r.useEffect)((()=>{(async()=>{try{const e=(await(0,t.br)()).data.info;_(e)}catch(a){var e,s;console.log(a),n.Am.error((null===(e=a.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"An error occurred while fetching roles")}})(),null!==x&&void 0!==x&&x.editData&&(p(x.editData._id),b(x.imageUrl+x.editData.image),h("name",x.editData.name),h("email",x.editData.email),C(x.editData.role_name),h("role",x.editData.role_name))}),[x,h]);const L=u("password");return(0,o.jsxs)("div",{className:"bg-light min-vh-100",children:[(0,o.jsx)(n.Ix,{}),(0,o.jsx)(d.KB,{className:"mt-3",children:(0,o.jsx)(d.rb,{children:(0,o.jsx)(d.b7,{md:8,children:(0,o.jsxs)(d.xH,{children:[(0,o.jsx)(d.bn,{children:"User Form"}),(0,o.jsx)(d.sl,{children:(0,o.jsxs)(d.lx,{className:"row g-3",onSubmit:c((e=>{g(!0);let s=new FormData;Object.keys(e).forEach((a=>{"image"===a&&e[a][0]?s.append(a,e[a][0]):s.append(a,e[a])})),s.append("role",O),""===j?(0,t.kA)(s).then((e=>{g(!1),200===e.status&&q("/user")})).catch((e=>{var s,a;g(!1),console.log(e);const r=(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Something went wrong";n.Am.error(r)})):(0,t.aq)(j,s).then((e=>{g(!1),200===e.status&&q("/user")})).catch((e=>{var s,a;g(!1),console.log(e);const r=(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Something went wrong";n.Am.error(r)}))})),children:[(0,o.jsxs)(d.b7,{xl:6,md:12,children:[(0,o.jsx)(d.L8,{children:"Name"}),(0,o.jsx)(d.jO,{type:"text",placeholder:"Name",...a("name",{required:"Name is required"}),invalid:!!m.name}),(0,o.jsx)(d.CO,{invalid:!0,children:null===(e=m.name)||void 0===e?void 0:e.message})]}),(0,o.jsxs)(d.b7,{xl:6,md:12,children:[(0,o.jsx)(d.L8,{children:"Email"}),(0,o.jsx)(d.jO,{type:"email",placeholder:"Email",...a("email",{required:"Email is required"}),invalid:!!m.email}),(0,o.jsx)(d.CO,{invalid:!0,children:null===(s=m.email)||void 0===s?void 0:s.message})]}),(0,o.jsxs)(d.b7,{xl:6,md:12,children:[(0,o.jsx)(d.L8,{children:"Password"}),(0,o.jsx)(d.jO,{type:"password",placeholder:"Password",...a("password",{required:""===j&&"Password is required"}),invalid:!!m.password}),m.password&&(0,o.jsx)(d.CO,{invalid:!0,children:m.password.message})]}),(0,o.jsxs)(d.b7,{xl:6,md:12,children:[(0,o.jsx)(d.L8,{children:"Confirm Password"}),(0,o.jsx)(d.jO,{type:"password",placeholder:"Confirm Password",...a("confpassword",{validate:e=>{if(L)return e===L||"Passwords do not match"}}),invalid:!!m.confpassword}),m.confpassword&&(0,o.jsx)(d.CO,{invalid:!0,children:m.confpassword.message})]}),(0,o.jsxs)(d.b7,{xl:6,md:12,children:[(0,o.jsx)(d.L8,{children:"Role"}),(0,o.jsxs)(d.LX,{...a("role",{required:"Role is required"}),onChange:e=>{C(e.target.value),h("role",e.target.value)},value:O,invalid:!!m.role,children:[(0,o.jsx)("option",{value:"",children:"Select Role"}),f.map((e=>(0,o.jsxs)("option",{value:e.name,children:[" ",e.name]},e._id)))]}),m.role&&(0,o.jsx)(d.CO,{invalid:!0,children:m.role.message})]}),(0,o.jsxs)(d.b7,{xl:4,md:12,children:[(0,o.jsx)(d.L8,{children:"Image"}),(0,o.jsx)(d.jO,{type:"file",...a("image",{required:""===w&&"Image is required"}),accept:"image/*",name:"image",onChange:e=>{const s=e.target.files[0];if(s){const e=URL.createObjectURL(s);b(e)}else b(null)}}),m.image&&(0,o.jsx)(d.CO,{invalid:!0,children:m.image.message})]}),(0,o.jsx)(d.b7,{md:5,children:w&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{children:"Image Preview"}),(0,o.jsx)("div",{className:"mb-4 text-center",children:(0,o.jsx)("img",{src:w,alt:"Profile Preview",style:{width:"150px",height:"150px",objectFit:"cover",borderRadius:"50%"}})})]})}),(0,o.jsx)(d.b7,{md:12,className:"text-center submitButton",children:v?(0,o.jsxs)(d.u5,{disabled:!0,children:[(0,o.jsx)(d.LQ,{component:"span",size:"sm","aria-hidden":"true"}),"Loading..."]}):(0,o.jsx)(d.u5,{type:"submit",className:"AddButton",children:j?"Update":"Add"})})]})})]})})})})]})}}}]);
//# sourceMappingURL=6423.aeb02457.chunk.js.map