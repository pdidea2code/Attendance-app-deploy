"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6132],{17417:(e,t,i)=>{i.r(t),i.d(t,{default:()=>o});var s=i(72791),n=i(61134),a=i(57689),d=i(78983),r=i(75985),l=(i(5462),i(28725)),c=i(80184);const o=()=>{var e,t,i;const{register:o,handleSubmit:m,formState:{errors:u},setValue:h,getValues:x}=(0,n.cI)(),{state:j}=(0,a.TH)(),[p,g]=(0,s.useState)(""),[v,b]=(0,s.useState)(!1),[f,D]=(0,s.useState)(""),_=(0,a.s0)();return(0,s.useEffect)((()=>{null!==j&&void 0!==j&&j.editData&&(g(j.editData._id),j.editData.image&&D(j.imageUrl+j.editData.image),h("title",j.editData.title),h("description",j.editData.description),h("date",(e=>{if(!e)return"";const t=e.split("/");if(3===t.length){const[e,i,s]=t;return"".concat(s,"-").concat(i,"-").concat(e)}return""})(j.editData.date)))}),[j,h]),(0,c.jsxs)("div",{className:"bg-light min-vh-100",children:[(0,c.jsx)(r.Ix,{}),(0,c.jsx)(d.KB,{className:"mt-3",children:(0,c.jsx)(d.rb,{children:(0,c.jsx)(d.b7,{md:8,children:(0,c.jsxs)(d.xH,{children:[(0,c.jsxs)(d.bn,{children:[p?"Update":"Add"," Form"]}),(0,c.jsx)(d.sl,{children:(0,c.jsxs)(d.lx,{className:"row g-3",onSubmit:m((e=>{b(!0);const t=(e=>{if(!e)return"";const t=e.split("-");if(3===t.length){const[e,i,s]=t;return"".concat(s,"/").concat(i,"/").concat(e)}return""})(e.date);e.date=t;let i=new FormData;Object.keys(e).forEach((function(t){"image"===t?void 0!==e[t][0]&&i.append(t,e[t][0]):i.append(t,e[t])})),""!==p&&i.append("id",p),""===p?(0,l.vj)(i).then((e=>{b(!1),200===e.status&&_("/announcement")})).catch((e=>{var t,i;console.log(e),b(!1);const s=(null===(t=e.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message)||"Something went wrong";r.Am.error(s)})):(0,l.mW)(i).then((e=>{b(!1),200===e.status&&_("/announcement")})).catch((e=>{var t,i;b(!1),console.log(e);const s=(null===(t=e.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message)||"Something went wrong";r.Am.error(s)}))})),children:[(0,c.jsxs)(d.b7,{xl:6,md:12,children:[(0,c.jsx)(d.L8,{children:"Title"}),(0,c.jsx)(d.jO,{type:"text",placeholder:"Title",...o("title",{required:"Title is required"}),invalid:!!u.title}),(0,c.jsx)(d.CO,{invalid:!0,children:null===(e=u.title)||void 0===e?void 0:e.message})]}),(0,c.jsxs)(d.b7,{xl:6,md:12,children:[(0,c.jsx)(d.L8,{children:"Description"}),(0,c.jsx)(d.jO,{type:"text",placeholder:"Description",...o("description",{required:"Description is required"}),invalid:!!u.description}),(0,c.jsx)(d.CO,{invalid:!0,children:null===(t=u.description)||void 0===t?void 0:t.message})]}),(0,c.jsxs)(d.b7,{xl:6,md:12,children:[(0,c.jsx)(d.L8,{children:"Date"}),(0,c.jsx)(d.jO,{type:"date",...o("date",{required:"Date is required"}),invalid:!!u.date,value:x("data")}),(0,c.jsx)(d.CO,{invalid:!0,children:null===(i=u.date)||void 0===i?void 0:i.message})]}),(0,c.jsxs)(d.b7,{xl:4,md:12,children:[(0,c.jsx)(d.L8,{children:"Image"}),(0,c.jsx)(d.jO,{type:"file",...o("image"),accept:"image/*",name:"image",onChange:e=>{const t=e.target.files[0];if(t){const e=URL.createObjectURL(t);D(e)}else D(null)}})]}),(0,c.jsx)(d.b7,{md:5,children:f&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{children:"Image Preview"}),(0,c.jsx)("div",{className:"mb-4 text-center",children:(0,c.jsx)("img",{src:f,alt:"Profile Preview",style:{width:"150px",height:"150px",objectFit:"cover",borderRadius:"50%"}})})]})}),(0,c.jsx)(d.b7,{md:12,className:"text-center submitButton",children:v?(0,c.jsxs)(d.u5,{disabled:!0,children:[(0,c.jsx)(d.LQ,{component:"span",size:"sm","aria-hidden":"true"}),"Loading..."]}):(0,c.jsx)(d.u5,{type:"submit",className:"AddButton",children:""===p?"Add":"Update"})})]})})]})})})})]})}}}]);
//# sourceMappingURL=6132.c413d969.chunk.js.map