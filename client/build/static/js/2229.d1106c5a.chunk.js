"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2229],{590:(e,i,a)=>{a.r(i),a.d(i,{default:()=>u});var s=a(72791),t=a(61134),d=a(57689),l=a(78983),r=a(75985),n=(a(5462),a(28725)),o=a(7993),c=a(80184);const u=()=>{var e,i,a,u,m,h,p,x,j,g;const{register:v,handleSubmit:w,formState:{errors:b},setValue:L,watch:f}=(0,t.cI)(),{state:k}=(0,d.TH)(),[O,y]=(0,s.useState)(""),[P,q]=(0,s.useState)(!1),[C,D]=(0,s.useState)(""),[_,N]=(0,s.useState)(""),S=(0,d.s0)(),A={lat:Number(null===k||void 0===k||null===(e=k.editData)||void 0===e?void 0:e.workplaceLatitude),lng:Number(null===k||void 0===k||null===(i=k.editData)||void 0===i?void 0:i.workplaceLongitude)},[I,U]=(0,s.useState)(A),[E,F]=(0,s.useState)(A);(0,s.useEffect)((()=>{(async()=>{try{q(!0);const e=await(0,n.e8)();200===e.status&&(q(!1),N(e.data.info))}catch(a){var e,i;q(!1);const s=(null===(e=a.response)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.message)||"Something went wrong";r.Am.error(s)}})(),null!==k&&void 0!==k&&k.editData&&(y(k.editData._id),D(k.imageUrl+k.editData.image),L("name",k.editData.name),L("email",k.editData.email),L("user_id",k.editData.user_id),L("position",k.editData.position),L("phoneno",k.editData.phoneno),L("workplaceLatitude",k.editData.workplaceLatitude),L("workplaceLongitude",k.editData.workplaceLongitude),L("dob",k.editData.dob))}),[k,L]);const z=f("password");return(0,c.jsxs)("div",{className:"bg-light min-vh-100",children:[(0,c.jsx)(r.Ix,{}),(0,c.jsx)(l.KB,{className:"mt-3",children:(0,c.jsx)(l.rb,{children:(0,c.jsx)(l.b7,{md:8,children:(0,c.jsxs)(l.xH,{children:[(0,c.jsxs)(l.bn,{children:[O?"Update":"Add"," Form"]}),(0,c.jsx)(l.sl,{children:(0,c.jsxs)(l.lx,{className:"row g-3",onSubmit:w((e=>{q(!0);let i=new FormData;Object.keys(e).forEach((function(a){"image"===a?void 0!==e[a][0]&&i.append(a,e[a][0]):""===e[a]||i.append(a,e[a])})),""===O?(0,n.CP)(i).then((e=>{q(!1),200===e.status&&S("/employee")})).catch((e=>{var i,a;q(!1);const s=(null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.message)||"Something went wrong";r.Am.error(s)})):(0,n.lt)(O,i).then((e=>{q(!1),200===e.status&&S("/employee")})).catch((e=>{var i,a;q(!1);const s=(null===(i=e.response)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.message)||"Something went wrong";r.Am.error(s)}))})),children:[(0,c.jsxs)(l.b7,{xl:6,md:12,children:[(0,c.jsx)(l.L8,{children:"Name"}),(0,c.jsx)(l.jO,{type:"text",placeholder:"Jone Doe",...v("name",{required:"Name is required"}),invalid:!!b.name}),(0,c.jsx)(l.CO,{invalid:!0,children:null===(a=b.name)||void 0===a?void 0:a.message})]}),(0,c.jsxs)(l.b7,{xl:6,md:12,children:[(0,c.jsx)(l.L8,{children:"Email"}),(0,c.jsx)(l.jO,{type:"email",placeholder:"example@domain.com",...v("email",{required:"Email is required"}),invalid:!!b.email}),(0,c.jsx)(l.CO,{invalid:!0,children:null===(u=b.email)||void 0===u?void 0:u.message})]}),(0,c.jsxs)(l.b7,{xl:6,md:12,children:[(0,c.jsx)(l.L8,{children:"Password"}),(0,c.jsx)(l.jO,{type:"password",placeholder:"Password",...v("password",{required:""===O&&"Password is required",minLength:{value:8,message:"Password must be at least 8 characters long"},validate:{validatePassword:e=>{if(!e)return!0;const i=/[A-Z]/.test(e),a=/[a-z]/.test(e),s=/[0-9]/.test(e),t=/[!@#$%^&*(),.?":{}|<>]/.test(e);return i?a?s?!!t||"Password must contain at least one special character":"Password must contain at least one number":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter"}}}),invalid:!!b.password}),b.password&&(0,c.jsx)(l.CO,{invalid:!0,children:b.password.message})]}),(0,c.jsxs)(l.b7,{xl:6,md:12,children:[(0,c.jsx)(l.L8,{children:"Confirm Password"}),(0,c.jsx)(l.jO,{type:"password",placeholder:"Confirm Password",...v("confpassword",{validate:e=>{if(z)return e===z||"Passwords do not match"}}),invalid:!!b.confpassword}),b.confpassword&&(0,c.jsx)(l.CO,{invalid:!0,children:b.confpassword.message})]}),(0,c.jsxs)(l.b7,{xl:6,md:12,children:[(0,c.jsx)(l.L8,{children:"Workplace Latitude"}),(0,c.jsx)(l.jO,{type:"number",step:"any",placeholder:"21.230449",...v("workplaceLatitude",{required:"workplace Latitude is required"}),invalid:!!b.workplaceLatitude}),(0,c.jsx)(l.CO,{invalid:!0,children:null===(m=b.workplaceLatitude)||void 0===m?void 0:m.message})]}),(0,c.jsxs)(l.b7,{xl:6,md:12,children:[(0,c.jsx)(l.L8,{children:"Workplace Longitude"}),(0,c.jsx)(l.jO,{type:"number",step:"any",placeholder:"72.900889",...v("workplaceLongitude",{required:"workplace Longitude is required"}),invalid:!!b.workplaceLongitude}),(0,c.jsx)(l.CO,{invalid:!0,children:null===(h=b.workplaceLongitude)||void 0===h?void 0:h.message})]}),(0,c.jsx)(l.b7,{xl:12,md:12,children:(0,c.jsx)(o.KJ,{googleMapsApiKey:_,children:(0,c.jsx)(o.b6,{mapContainerStyle:{height:"400px",width:"auto"},center:I,zoom:12,onClick:e=>{U({lat:e.latLng.lat(),lng:e.latLng.lng()}),F({lat:e.latLng.lat(),lng:e.latLng.lng()}),L("workplaceLatitude",e.latLng.lat()),L("workplaceLongitude",e.latLng.lng())},children:E&&(0,c.jsx)(o.Jx,{position:E})})})}),(0,c.jsxs)(l.b7,{xl:4,md:12,children:[(0,c.jsx)(l.L8,{children:"User ID"}),(0,c.jsx)(l.jO,{type:"text",placeholder:"01",...v("user_id",{required:"User ID is required"}),invalid:!!b.user_id}),(0,c.jsx)(l.CO,{invalid:!0,children:null===(p=b.user_id)||void 0===p?void 0:p.message})]}),(0,c.jsxs)(l.b7,{xl:4,md:12,children:[(0,c.jsx)(l.L8,{children:"Position"}),(0,c.jsx)(l.jO,{type:"text",placeholder:"Software Engineer",...v("position",{required:"Position is required"}),invalid:!!b.position}),(0,c.jsx)(l.CO,{invalid:!0,children:null===(x=b.position)||void 0===x?void 0:x.message})]}),(0,c.jsxs)(l.b7,{xl:4,md:12,children:[(0,c.jsx)(l.L8,{children:"Phone No"}),(0,c.jsx)(l.jO,{type:"tel",placeholder:"9999999999",...v("phoneno",{required:"Phone No is required",pattern:{value:/^[0-9]{10}$/,message:"Phone No must be exactly 10 digits"}}),invalid:!!b.phoneno}),(0,c.jsx)(l.CO,{invalid:!0,children:null===(j=b.phoneno)||void 0===j?void 0:j.message})]}),(0,c.jsxs)(l.b7,{xl:4,md:12,children:[(0,c.jsx)(l.L8,{children:"Date of birth"}),(0,c.jsx)(l.jO,{type:"date",...v("dob",{required:"Date of birth No is required"}),invalid:!!b.dob}),(0,c.jsx)(l.CO,{invalid:!0,children:null===(g=b.dob)||void 0===g?void 0:g.message})]}),(0,c.jsxs)(l.b7,{xl:4,md:12,children:[(0,c.jsx)(l.L8,{children:"Image"}),(0,c.jsx)(l.jO,{type:"file",...v("image",{required:""===O&&"Image is required"}),accept:"image/*",name:"image",onChange:e=>{const i=e.target.files[0];if(i){const e=URL.createObjectURL(i);D(e)}else D(null)}}),b.image&&(0,c.jsx)(l.CO,{invalid:!0,children:b.image.message})]}),(0,c.jsx)(l.b7,{md:4,children:C&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{children:"Image Preview"}),(0,c.jsx)("div",{className:"mb-4 text-center",children:(0,c.jsx)("img",{src:C,alt:"Profile Preview",style:{width:"150px",height:"150px",objectFit:"cover",borderRadius:"50%"}})})]})}),(0,c.jsx)(l.b7,{md:12,className:"text-center submitButton",children:P?(0,c.jsxs)(l.u5,{disabled:!0,children:[(0,c.jsx)(l.LQ,{component:"span",size:"sm","aria-hidden":"true"}),"Loading..."]}):(0,c.jsx)(l.u5,{type:"submit",className:"AddButton",children:""===O?"Add":"Update"})})]})})]})})})})]})}}}]);
//# sourceMappingURL=2229.d1106c5a.chunk.js.map