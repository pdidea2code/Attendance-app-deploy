"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3634],{28725:(e,t,a)=>{a.d(t,{SU:()=>me,kA:()=>S,vj:()=>C,CP:()=>w,vP:()=>O,DK:()=>I,N$:()=>Q,zJ:()=>f,_d:()=>p,Cp:()=>g,WY:()=>u,wv:()=>ne,AT:()=>k,vg:()=>ce,jP:()=>P,_5:()=>N,Bt:()=>L,qd:()=>V,yu:()=>G,_2:()=>b,Rk:()=>E,tG:()=>T,YA:()=>Y,DI:()=>K,g1:()=>v,Rd:()=>z,Q3:()=>j,O8:()=>y,k5:()=>_,w7:()=>te,LH:()=>ie,EY:()=>q,Ro:()=>re,HK:()=>R,Ir:()=>de,jw:()=>J,Yj:()=>B,cY:()=>A,$8:()=>W,Sk:()=>ee,MV:()=>X,QI:()=>ae,Hx:()=>oe,br:()=>Z,VQ:()=>le,x4:()=>c,gq:()=>he,c0:()=>m,aY:()=>l,aq:()=>M,mW:()=>H,lt:()=>x,eJ:()=>D,sZ:()=>se,PS:()=>U,aM:()=>F,m7:()=>$,y1:()=>h});var n=a(12903),o=a(88329),r=a(72791);const s="https://attendance-app-deploy.onrender.com";var i=a(5695),d=(a(59434),a(80184));n.Z.interceptors.response.use((e=>e),(async e=>{console.log(e);const t=e.config;if(402==e.status&&!t._retry){t._retry=!0;try{const e=o.Z.get("refreshToken"),a=(await n.Z.post("".concat(s,"/admin/refreshToken"),{refreshToken:e})).data.info;return o.Z.set("token",a,{sameSite:"Strict",secure:!0}),t.headers.Authorization="Bearer ".concat(a),(0,n.Z)(t)}catch(a){}}return 405===e.response.status&&o.Z.remove("accessToken"),Promise.reject(e)}));const c=e=>n.Z.post(s+"/admin/login",e),l=e=>n.Z.post(s+"/admin/checkEmailId",e),h=e=>n.Z.post(s+"/admin/verifyLink",e),m=e=>n.Z.post(s+"/admin/resetPassword",e),g=e=>n.Z.post(s+"/admin/changePassword",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),u=e=>n.Z.post(s+"/admin/changeProfile",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),Z=()=>n.Z.get(s+"/admin/role/getAllRole",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),p=e=>n.Z.post(s+"/admin/role/addRole",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),A=()=>n.Z.get(s+"/admin/role/getRolle",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),k=e=>n.Z.post(s+"/admin/role/changePermission",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),z=e=>n.Z.post(s+"/admin/role/deleteRole",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),B=e=>n.Z.get(s+"/admin/permission/permissions",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),v=e=>n.Z.delete(s+"/admin/permission/deletePermission/"+e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),f=e=>n.Z.post(s+"/admin/permission/addPermission",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),y=()=>n.Z.get(s+"/admin/employee/getAllUser",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),w=e=>n.Z.post(s+"/admin/employee/addUser",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),x=(e,t)=>n.Z.post(s+"/admin/employee/updateUser/"+e,t,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),j=()=>n.Z.get(s+"/admin/admins/getAllAdmin",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),S=e=>n.Z.post(s+"/admin/admins/addAdmin",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),M=(e,t)=>n.Z.post(s+"/admin/admins/updateAdmin/"+e,t,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),P=e=>n.Z.get(s+"/admin/admins/deleteAdmin/"+e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),b=e=>n.Z.post(s+"/admin/admins/deleteManyAdmin",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),_=e=>n.Z.get(s+"/admin/announcement/getAllAnnouncement",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),C=e=>n.Z.post(s+"/admin/announcement/addAnnouncement",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),H=e=>n.Z.post(s+"/admin/announcement/updateAnnouncement",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),N=e=>n.Z.get(s+"/admin/announcement/deleteAnnouncement/"+e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),E=e=>n.Z.post(s+"/admin/announcement/deleteManyAnnouncement",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),R=()=>n.Z.get(s+"/admin/holiday/getAllHolidays",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),I=e=>n.Z.post(s+"/admin/holiday/addHoliday",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),U=e=>n.Z.post(s+"/admin/holiday/updateHoliday",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),V=e=>n.Z.post(s+"/admin/holiday/deleteHoliday/"+e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),Y=e=>n.Z.post(s+"/admin/holiday/deleteMultiHoliday",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),q=()=>n.Z.get(s+"/admin/event/getAllEvents",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),O=e=>n.Z.post(s+"/admin/event/addEvent",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),D=e=>n.Z.post(s+"/admin/event/updateEvent",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),L=e=>n.Z.post(s+"/admin/event/deleteEvent/"+e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),T=e=>n.Z.post(s+"/admin/event/deleteMultiEvent",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),J=()=>n.Z.get(s+"/admin/month/getMonth",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),Q=e=>n.Z.post(s+"/admin/month/addMonth",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),F=e=>n.Z.post(s+"/admin/month/updateMonth ",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),G=e=>n.Z.post(s+"/admin/month/deleteMonth/"+e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),K=e=>n.Z.post(s+"/admin/month/deleteMultiMonth",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),W=()=>n.Z.get(s+"/admin/setting/getSetting",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),$=e=>n.Z.post(s+"/admin/setting/updateSetting",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),X=e=>n.Z.post(s+"/admin/attendance/getUseridAttendance",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),ee=e=>n.Z.post(s+"/admin/attendance/getMonthAttendance",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),te=e=>n.Z.post(s+"/admin/attendance/getAllAttendance",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),ae=e=>n.Z.post(s+"/admin/leave/getUserLeave",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),ne=e=>n.Z.post(s+"/admin/leave/changeStatus",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),oe=()=>n.Z.post(s+"/admin/leave/getallLeave",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),re=()=>n.Z.get(s+"/admin/generalsetting/getGeneralsetting",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),se=e=>n.Z.post(s+"/admin/generalsetting/updateGeneralsetting",e,{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),ie=()=>n.Z.get(s+"/admin/dashbord/getAttendanceCount",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}}),de=()=>n.Z.get(s+"/admin/dashbord/leaveRequest",{headers:{Authorization:"Bearer ".concat(o.Z.get("token"))}});function ce(e){const t=new Date(e),a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(o)}const le=async e=>{try{const t=(await A()).data.info;o.Z.set("role",JSON.stringify(t.role)),o.Z.set("permission",JSON.stringify(t.permissions)),e({type:i.g3,role:t.role,permission:t.permissions})}catch(t){console.log(t)}},he=e=>{const t=Math.floor(e/60),a=e%60;return"".concat(String(t).padStart(2,"0"),":").concat(String(a).padStart(2,"0"))},me=()=>{const[e,t]=(0,r.useState)(new Date);(0,r.useEffect)((()=>{const e=setInterval((()=>{t(new Date)}),1e3);return()=>clearInterval(e)}),[]);return(0,d.jsx)("div",{style:{fontSize:"16px",fontFamily:"Arial, sans-serif",backgroundColor:"gray",color:"white",padding:"5px",borderRadius:"20px"},children:(e=>{let t=e.getHours();const a=String(e.getMinutes()).padStart(2,"0"),n=String(e.getSeconds()).padStart(2,"0"),o=t>=12?"PM":"AM";return t%=12,t=t||12,t=String(t).padStart(2,"0"),"".concat(t,":").concat(a,":").concat(n," ").concat(o)})(e)})}},15252:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var n=a(93647),o=a(24846),r=a(78983),s=a(72791),i=a(61134),d=a(57689),c=a(75985),l=(a(5462),a(28725)),h=a(80184);const m=()=>{const{id:e,resetCode:t}=(0,d.UO)(),[a,m]=(0,s.useState)(!1),[g,u]=(0,s.useState)(!1),Z=(0,d.s0)(),{register:p,getValues:A,setValue:k,handleSubmit:z,control:B,clearErrors:v,formState:{errors:f}}=(0,i.cI)();return(0,s.useEffect)((()=>{(async()=>{try{u(!0);const a={id:e,resetCode:t};401===(await(0,l.y1)(a)).status?(c.Am.error("Invalid reset link"),m(!1)):m(!0)}catch(a){console.log(a),c.Am.error("Error validating reset link"),m(!1)}finally{u(!1)}})()}),[e,t]),(0,h.jsx)(h.Fragment,{children:g?(0,h.jsx)("div",{className:"d-flex justify-content-center",children:(0,h.jsx)(r.LQ,{className:"theme-spinner-color"})}):a?(0,h.jsx)("div",{className:"bg-light min-vh-100 d-flex flex-row align-items-center",children:(0,h.jsxs)(r.KB,{children:[(0,h.jsx)(c.Ix,{}),(0,h.jsx)(r.rb,{className:"justify-content-center",children:(0,h.jsx)(r.b7,{md:8,lg:7,xl:5,children:(0,h.jsx)(r.xH,{className:"mx-4",children:(0,h.jsx)(r.sl,{className:"p-4",children:(0,h.jsxs)(r.lx,{onSubmit:z((async a=>{if(a.password===a.confpassword)try{const n={id:e,resetCode:t,password:a.password,confpassword:a.confpassword};401===(await(0,l.c0)(n)).status?c.Am.error("Invalid Details"):(c.Am.success("Password Changed Successfully"),k("password",""),k("confpassword",""),setTimeout((()=>{Z("/")}),2e3))}catch(r){var n,o;console.log(r),c.Am.error((null===(n=r.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)||"Error occurred while changing password")}else c.Am.error("Passwords do not match")})),children:[(0,h.jsx)("h1",{children:"Reset Password"}),(0,h.jsxs)(r.YR,{className:"mb-3",children:[(0,h.jsx)(r.wV,{children:(0,h.jsx)(o.Z,{icon:n.U})}),(0,h.jsx)(r.jO,{type:"password",placeholder:"Password",...p("password",{required:"Password is required"}),invalid:!!f.password}),f.password&&(0,h.jsx)(r.CO,{invalid:!0,children:f.password.message})]}),(0,h.jsxs)(r.YR,{className:"mb-3",children:[(0,h.jsx)(r.wV,{children:(0,h.jsx)(o.Z,{icon:n.U})}),(0,h.jsx)(r.jO,{type:"password",placeholder:"Confirm Password",...p("confpassword",{required:"Confirm Password is required"}),invalid:!!f.confpassword}),f.confpassword&&(0,h.jsx)(r.CO,{invalid:!0,children:f.confpassword.message})]}),(0,h.jsx)(r.rb,{children:(0,h.jsx)(r.b7,{xs:6,children:(0,h.jsx)(r.u5,{color:"primary",type:"submit",className:"px-4",children:"Submit"})})})]})})})})})]})}):(0,h.jsx)("div",{className:"d-flex justify-content-center mt-5",children:(0,h.jsx)("h3",{children:"Invalid Link"})})})}},93647:(e,t,a)=>{a.d(t,{U:()=>n});var n=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M384,200V144a128,128,0,0,0-256,0v56H88V328c0,92.635,75.364,168,168,168s168-75.365,168-168V200ZM160,144a96,96,0,0,1,192,0v56H160ZM392,328c0,74.99-61.01,136-136,136s-136-61.01-136-136V232H392Z' class='ci-primary'/>"]}}]);
//# sourceMappingURL=3634.172e6c8c.chunk.js.map