"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3800],{96318:(e,r,o)=>{o.r(r),o.d(r,{default:()=>u});var a=o(72791),t=o(75985),s=(o(5462),o(78983)),n=(o(96558),o(8379)),i=o(89078),l=o(59434),d=o(28725),c=o(80184);const p=()=>{const[e,r]=(0,a.useState)([]),[o,n]=(0,a.useState)(!1),p=(0,l.I0)(),u=(0,l.v9)((e=>e.auth)),[m,f]=(0,a.useState)([]),b=async()=>{try{const e=(await(0,d.Ir)()).data.info;if(console.log(e),Array.isArray(e)){const o=await e.map((e=>({...e,modifydate:(0,d.vg)(e.date),modifytodate:e.todate?(0,d.vg)(e.todate):"-",modifyhour:e.hour?"".concat(e.hour," Hour "):"-",modifyapprovebyname:e.approvebyname?e.approvebyname:"-",modiftuser_id:e.user_id.user_id?e.user_id.user_id:"-",username:e.user_id.name?e.user_id.name:"-"})));r(o)}}catch(a){var e,o;console.log(a),t.Am.error((null===(e=a.response)||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message)||"An error occurred")}},y=async(e,r)=>{try{const o={id:e._id,status:r},a=await(0,d.wv)(o);console.log(a)}catch(s){var o,a;console.log(s),t.Am.error((null===(o=s.response)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.message)||"An error occurred")}finally{b()}};(0,a.useEffect)((()=>{(async()=>{await(0,d.cY)(p),f(u.permission)})()}),[]),(0,a.useEffect)((()=>{b()}),[]);const g=[{name:"modiftuser_id",label:"user_id",options:{filter:!0,sort:!0}},{name:"username",label:"name",options:{filter:!0,sort:!0}},{name:"modifydate",label:"date",options:{filter:!0,sort:!0}},{name:"modifytodate",label:"todate",options:{filter:!0,sort:!0}},{name:"modifyhour",label:"hour",options:{filter:!0,sort:!0}},{name:"type",label:"type",options:{filter:!0,sort:!0}},{name:"levaetype",label:"levaetype",options:{filter:!0,sort:!0}},{name:"day",label:"day",options:{filter:!0,sort:!0}},{name:"reson",label:"reson",options:{filter:!0,sort:!0}},{name:"modifyapprovebyname",label:"approveby",options:{filter:!0,sort:!0}},{name:"status",label:"status",options:{filter:!0,sort:!0,customBodyRender:e=>"Pending"===e?(0,c.jsx)("p",{style:{background:"#ffc800",color:"black",borderRadius:"20px",textAlign:"center",padding:"4px"},children:e}):"Rejected"===e?(0,c.jsx)("p",{style:{background:"red",color:"black",borderRadius:"20px",textAlign:"center",padding:"4px"},children:e}):"Approved"===e?(0,c.jsx)("p",{style:{background:"#00ff00",color:"black",borderRadius:"20px",textAlign:"center",padding:"4px"},children:e}):null}}];Array.isArray(m)&&m.includes("leave.edit")&&g.push({name:"_id",label:"Action",options:{filter:!1,sort:!1,customBodyRender:r=>{const o=e.find((e=>e._id===r));return"Approved"===o.status?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.u5,{className:"me-1 mb-1",style:{padding:"5px",background:"red",color:"black"},onClick:()=>{y(o,"Rejected")},children:"Reject"}),(0,c.jsx)(s.u5,{style:{padding:"5px",background:"#ffc800",color:"black"},onClick:()=>{y(o,"Pending")},children:"Pending"})]}):"Rejected"===o.status?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.u5,{className:"me-1 mb-1",style:{padding:"5px",background:"#00ff00",color:"black"},onClick:()=>{y(o,"Approved")},children:"Approv"}),(0,c.jsx)(s.u5,{style:{padding:"5px",background:"#ffc800",color:"black"},onClick:()=>{y(o,"Pending")},children:"Pending"})]}):"Pending"===o.status?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.u5,{className:"me-1 mb-1",style:{padding:"5px",background:"#00ff00",color:"black"},onClick:()=>{y(o,"Approved")},children:"Approv"}),(0,c.jsx)(s.u5,{style:{padding:"5px",background:"red",color:"black"},onClick:()=>{y(o,"Rejected")},children:"Reject"})]}):void 0}}});return(0,c.jsx)(c.Fragment,{children:o?(0,c.jsx)("div",{className:"d-flex justify-content-center",children:(0,c.jsx)(s.LQ,{className:"theme-spinner-color"})}):(0,c.jsx)(i.ZP,{title:"Leave",data:e,columns:g,options:{rowsPerPage:5,rowsPerPageOptions:[5,10,15,20]}})})},u=()=>{const e=(0,l.I0)(),r=(0,l.v9)((e=>e.auth)),[o,i]=(0,a.useState)([]);return(0,a.useEffect)((()=>{(async()=>{await(0,d.cY)(e),i(r.permission)})()}),[]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(t.Ix,{}),(0,c.jsx)(n.Z,{}),(0,c.jsx)(s.rb,{children:Array.isArray(o)&&o.includes("leave.view")&&(0,c.jsx)(s.b7,{md:12,xl:12,children:(0,c.jsx)(p,{})})})]})}}}]);
//# sourceMappingURL=3800.b1f96481.chunk.js.map